<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Phuc Long - Homepage</title>

  <!-- CSS d√πng chung cho to√†n b·ªô client pages -->
  <link rel="stylesheet" href="assets/css/global.css" />

  <!-- CSS d√†nh ri√™ng cho header + footer -->
  <link rel="stylesheet" href="assets/components/header-footer.css" />
</head>
<body>

  <!-- HEADER ƒë∆∞·ª£c inject b·∫±ng JS -->
  <div id="site-header"></div>

  <!-- HERO (Banner t√≠m Halloween) -->
  <section class="hero hero--halloween">
    <div class="hero-inner"><!-- text n·∫±m trong Banner 1.jpg --></div>
  </section>

  <!-- BEST SELLERS #1: TR√Ä TH∆†M CH·∫§T L∆Ø·ª¢NG -->
  <section class="section-best-sellers">
    <div class="carousel-header">
      BEST SELLERS ‚Äì TR√Ä TH∆†M CH·∫§T L∆Ø·ª¢NG
    </div>

    <div class="carousel" data-carousel="1">
      <button class="carousel-arrow left" data-dir="left">‚Äπ</button>

      <div class="carousel-window">
        <div class="carousel-track">
          <!-- SP1 -->
          <div class="product-card"
               onclick="goToProductDetail('hong-tra-dao', 'H·ªìng tr√† ƒë√†o', 60000, 'assets/images/HongTraDao.png')">
            <div class="product-img">
              <img src="assets/images/HongTraDao.png" alt="H·ªìng tr√† ƒë√†o" />
              <div class="product-icons">
                <button class="cart-icon-btn"
                        onclick="event.stopPropagation();
                                 addToCart('hong-tra-dao','H·ªìng tr√† ƒë√†o',60000,'assets/images/HongTraDao.png')">
                  üõí
                </button>
                <button class="heart-icon-btn" onclick="event.stopPropagation();">‚ù§Ô∏è</button>
              </div>
            </div>
            <div class="product-name">H·ªìng tr√† ƒë√†o</div>
            <div class="product-size">Size: M - L</div>
            <div class="product-price">60.000 - 69.000‚Ç´</div>
          </div>

          <!-- SP2 -->
          <div class="product-card"
               onclick="goToProductDetail('tra-ba-tuoc-luu-do', 'Tr√† b√° t∆∞·ªõc l·ª±u ƒë·ªè', 60000, 'assets/images/TraBaTuocLuuDo.png')">
            <div class="product-img">
              <img src="assets/images/TraBaTuocLuuDo.png" alt="Tr√† b√° t∆∞·ªõc l·ª±u ƒë·ªè" />
              <div class="product-icons">
                <button class="cart-icon-btn"
                        onclick="event.stopPropagation();
                                 addToCart('tra-ba-tuoc-luu-do','Tr√† b√° t∆∞·ªõc l·ª±u ƒë·ªè',60000,'assets/images/TraBaTuocLuuDo.png')">
                  üõí
                </button>
                <button class="heart-icon-btn" onclick="event.stopPropagation();">‚ù§Ô∏è</button>
              </div>
            </div>
            <div class="product-name">Tr√† b√° t∆∞·ªõc l·ª±u ƒë·ªè</div>
            <div class="product-size">Size: M - L</div>
            <div class="product-price">60.000 - 69.000‚Ç´</div>
          </div>

          <!-- SP3 -->
          <div class="product-card"
               onclick="goToProductDetail('tra-lai-dac-thom', 'Tr√† l√†i ƒë·∫∑c th∆°m', 59000, 'assets/images/TraLaiDacThom.png')">
            <div class="product-img">
              <img src="assets/images/TraLaiDacThom.png" alt="Tr√† l√†i ƒë·∫∑c th∆°m" />
              <div class="product-icons">
                <button class="cart-icon-btn"
                        onclick="event.stopPropagation();
                                 addToCart('tra-lai-dac-thom','Tr√† l√†i ƒë·∫∑c th∆°m',59000,'assets/images/TraLaiDacThom.png')">
                  üõí
                </button>
                <button class="heart-icon-btn" onclick="event.stopPropagation();">‚ù§Ô∏è</button>
              </div>
            </div>
            <div class="product-name">Tr√† l√†i ƒë·∫∑c th∆°m</div>
            <div class="product-size">Size: M - L</div>
            <div class="product-price">59.000 - 65.000‚Ç´</div>
          </div>

          <!-- SP4 -->
          <div class="product-card"
               onclick="goToProductDetail('tra-lai-mang-cau-thach-dua','Tr√† l√†i mƒÉng c·∫ßu th·∫°ch d·ª´a',60000,'assets/images/TraLaiMangCauThachDua.png')">
            <div class="product-img">
              <img src="assets/images/TraLaiMangCauThachDua.png" alt="Tr√† l√†i mƒÉng c·∫ßu th·∫°ch d·ª´a" />
              <div class="product-icons">
                <button class="cart-icon-btn"
                        onclick="event.stopPropagation();
                                 addToCart('tra-lai-mang-cau-thach-dua','Tr√† l√†i mƒÉng c·∫ßu th·∫°ch d·ª´a',60000,'assets/images/TraLaiMangCauThachDua.png')">
                  üõí
                </button>
                <button class="heart-icon-btn" onclick="event.stopPropagation();">‚ù§Ô∏è</button>
              </div>
            </div>
            <div class="product-name">Tr√† l√†i mƒÉng c·∫ßu th·∫°ch d·ª´a</div>
            <div class="product-size">Size: M - L</div>
            <div class="product-price">60.000 - 69.000‚Ç´</div>
          </div>

          <!-- SP5 -->
          <div class="product-card"
               onclick="goToProductDetail('tra-lucky-tea','Tr√† Lucky Tea',59000,'assets/images/TraLuckyTea.png')">
            <div class="product-img">
              <img src="assets/images/TraLuckyTea.png" alt="Tr√† Lucky Tea" />
              <div class="product-icons">
                <button class="cart-icon-btn"
                        onclick="event.stopPropagation();
                                 addToCart('tra-lucky-tea','Tr√† Lucky Tea',59000,'assets/images/TraLuckyTea.png')">
                  üõí
                </button>
                <button class="heart-icon-btn" onclick="event.stopPropagation();">‚ù§Ô∏è</button>
              </div>
            </div>
            <div class="product-name">Tr√† Lucky Tea</div>
            <div class="product-size">Size: M - L</div>
            <div class="product-price">59.000 - 69.000‚Ç´</div>
          </div>
        </div>
      </div>

      <button class="carousel-arrow right" data-dir="right">‚Ä∫</button>
    </div>
  </section>

  <!-- BEST SELLERS #2: TR√Ä S·ªÆA ƒê·∫¨M V·ªä -->
  <section class="section-best-sellers">
    <div class="carousel-header">
      BEST SELLERS ‚Äì TR√Ä S·ªÆA ƒê·∫¨M V·ªä
    </div>

    <div class="carousel" data-carousel="2">
      <button class="carousel-arrow left" data-dir="left">‚Äπ</button>

      <div class="carousel-window">
        <div class="carousel-track">
          <!-- SP1 -->
          <div class="product-card"
               onclick="goToProductDetail('tra-sua-matcha','Tr√† s·ªØa matcha',49000,'assets/images/TraNhanSen.png')">
            <div class="product-img">
              <img src="assets/images/TraNhanSen.png" alt="Tr√† s·ªØa matcha" />
              <div class="product-icons">
                <button class="cart-icon-btn"
                        onclick="event.stopPropagation();
                                 addToCart('tra-sua-matcha','Tr√† s·ªØa matcha',49000,'assets/images/TraNhanSen.png')">
                  üõí
                </button>
                <button class="heart-icon-btn" onclick="event.stopPropagation();">‚ù§Ô∏è</button>
              </div>
            </div>
            <div class="product-name">Tr√† s·ªØa matcha</div>
            <div class="product-size">Size: M - L</div>
            <div class="product-price">49.000 - 65.000‚Ç´</div>
          </div>

          <!-- SP2 -->
          <div class="product-card"
               onclick="goToProductDetail('hong-tra-dao-sua-konjac','H·ªìng tr√† ƒë√†o s·ªØa th·∫°ch Konjac',54000,'assets/images/TraOLongCamDaoThachKonjac.png')">
            <div class="product-img">
              <img src="assets/images/TraOLongCamDaoThachKonjac.png" alt="H·ªìng tr√† ƒë√†o s·ªØa th·∫°ch Konjac" />
              <div class="product-icons">
                <button class="cart-icon-btn"
                        onclick="event.stopPropagation();
                                 addToCart('hong-tra-dao-sua-konjac','H·ªìng tr√† ƒë√†o s·ªØa th·∫°ch Konjac',54000,'assets/images/TraOLongCamDaoThachKonjac.png')">
                  üõí
                </button>
                <button class="heart-icon-btn" onclick="event.stopPropagation();">‚ù§Ô∏è</button>
              </div>
            </div>
            <div class="product-name">H·ªìng tr√† ƒë√†o s·ªØa th·∫°ch Konjac</div>
            <div class="product-size">Size: M - L</div>
            <div class="product-price">54.000 - 65.000‚Ç´</div>
          </div>

          <!-- SP3 -->
          <div class="product-card"
               onclick="goToProductDetail('hong-tra-sua','H·ªìng tr√† s·ªØa',45000,'assets/images/TraOLongDau.png')">
            <div class="product-img">
              <img src="assets/images/TraOLongDau.png" alt="H·ªìng tr√† s·ªØa" />
              <div class="product-icons">
                <button class="cart-icon-btn"
                        onclick="event.stopPropagation();
                                 addToCart('hong-tra-sua','H·ªìng tr√† s·ªØa',45000,'assets/images/TraOLongDau.png')">
                  üõí
                </button>
                <button class="heart-icon-btn" onclick="event.stopPropagation();">‚ù§Ô∏è</button>
              </div>
            </div>
            <div class="product-name">H·ªìng tr√† s·ªØa</div>
            <div class="product-size">Size: M - L</div>
            <div class="product-price">45.000 - 55.000‚Ç´</div>
          </div>

          <!-- SP4 -->
          <div class="product-card"
               onclick="goToProductDetail('tra-sua-ba-tuoc','Tr√† s·ªØa b√° t∆∞·ªõc',50000,'assets/images/TraOLongLaiBuoi.png')">
            <div class="product-img">
              <img src="assets/images/TraOLongLaiBuoi.png" alt="Tr√† s·ªØa b√° t∆∞·ªõc" />
              <div class="product-icons">
                <button class="cart-icon-btn"
                        onclick="event.stopPropagation();
                                 addToCart('tra-sua-ba-tuoc','Tr√† s·ªØa b√° t∆∞·ªõc',50000,'assets/images/TraOLongLaiBuoi.png')">
                  üõí
                </button>
                <button class="heart-icon-btn" onclick="event.stopPropagation();">‚ù§Ô∏è</button>
              </div>
            </div>
            <div class="product-name">Tr√† s·ªØa b√° t∆∞·ªõc</div>
            <div class="product-size">Size: M - L</div>
            <div class="product-price">50.000 - 55.000‚Ç´</div>
          </div>

          <!-- SP5 -->
          <div class="product-card"
               onclick="goToProductDetail('tra-sua-lai','Tr√† s·ªØa l√†i',55000,'assets/images/TraVaiSen.png')">
            <div class="product-img">
              <img src="assets/images/TraVaiSen.png" alt="Tr√† s·ªØa l√†i" />
              <div class="product-icons">
                <button class="cart-icon-btn"
                        onclick="event.stopPropagation();
                                 addToCart('tra-sua-lai','Tr√† s·ªØa l√†i',55000,'assets/images/TraVaiSen.png')">
                  üõí
                </button>
                <button class="heart-icon-btn" onclick="event.stopPropagation();">‚ù§Ô∏è</button>
              </div>
            </div>
            <div class="product-name">Tr√† s·ªØa l√†i</div>
            <div class="product-size">Size: M - L</div>
            <div class="product-price">55.000 - 59.000‚Ç´</div>
          </div>
        </div>
      </div>

      <button class="carousel-arrow right" data-dir="right">‚Ä∫</button>
    </div>
  </section>

  <!-- B·ªò S∆ØU T·∫¨P | "ƒê√ÅM CU·ªêI K·∫∏" -->
  <section class="collection-wrapper">
    <div class="collection-inner">
      <div class="collection-image-card">
        <img src="assets/images/DamCuoiKe.jpg" alt="B·ªô s∆∞u t·∫≠p ƒê√°m c∆∞·ªõi k·∫π" />
      </div>

      <div class="collection-copy">
        <h3>
          <span>B·ªò S∆ØU T·∫¨P</span>
          <span>ƒê√ÅM CU·ªêI K·∫∏</span>
        </h3>

        <div class="bullets">
          <p>BST phi√™n b·∫£n Halloween ‚Äì ƒë·ªì u·ªëng & b√°nh ng·ªçt phong c√°ch gothic.</p>
          <p>Ph√∫c Long √ó ShopeeFood; combo ‚ÄúƒÇn H·ª∑ Nh√† K·∫π‚Äù ch·ªâ 89K (gi√° g·ªëc 114K).</p>
          <p>√Åp d·ª•ng t·∫°i c·ª≠a h√†ng ch·ªçn l·ªçc & ƒë·∫∑t qua ShopeeFood (s·ªë l∆∞·ª£ng c√≥ h·∫°n).</p>
        </div>

        <a class="cta-btn" href="#">XEM NGAY</a>
      </div>
    </div>
  </section>

  <!-- COMBO BANNER (ƒÇN H·ª∂ NH√Ä K·∫∏) -->
  <section class="combo-banner">
    <!-- assets/images/Banner2.jpg ch·ª©a layout khuy·∫øn m√£i -->
  </section>

  <!-- DISCOUNT ITEM -->
  <section class="discount-section">
    <div class="discount-header">
      <h2>Discount Item</h2>
      <div class="discount-tabs">
        <a href="#">Milk Tea ‚Ä¢</a>
        <a href="#">Fruit Tea</a>
        <a href="#">Bakery Collections</a>
      </div>
    </div>

    <div class="discount-body">
      <div class="discount-text">
        <div class="percent">20% Discount</div>
        <div class="product-title">Tr√† s·ªØa Ph√∫c Long</div>

        <p class="desc">
          H∆∞∆°ng v·ªã tr√† ƒë·∫≠m, s·ªØa b√©o m·ªãn, c√¢n b·∫±ng ng·ªçt nh·∫π. Pha t·ª´ l√° tr√†
          ch·ªçn l·ªçc v√† nguy√™n li·ªáu t∆∞∆°i m·ªói ng√†y ‚Äì signature c·ªßa Ph√∫c Long.
        </p>

        <ul class="checklist">
          <li>Tr√† ch·ªçn l·ªçc th·ªß c√¥ng</li>
          <li>S·ªØa m·ªãn nh∆∞ng kh√¥ng ng·∫•y</li>
          <li>ƒê·ªô ng·ªçt c√¢n b·∫±ng</li>
          <li>Pha m·ªõi m·ªói ng√†y</li>
        </ul>

        <a class="btn-shop-now" href="#">Shop Now</a>
      </div>

      <div class="discount-visual">
        <div class="discount-circle-bg"></div>
        <div class="discount-image-wrapper">
          <img src="assets/images/aboutPL.jpg" alt="Tr√† s·ªØa Ph√∫c Long" />
        </div>
      </div>
    </div>
  </section>

  <!-- NEWSLETTER CTA -->
  <section class="newsletter-banner">
    <div class="newsletter-inner">
      <div class="newsletter-left"></div>

      <div class="newsletter-right">
        <h3>Get Latest Update By Subscribe Our Newsletter</h3>
        <a class="btn-shop-now" href="#">Shop Now</a>
      </div>
    </div>
  </section>

  <!-- BLOG -->
  <section class="blog-section">
    <div class="blog-header">
      <h2>Leatest Blog</h2>
    </div>

    <div class="blog-cards">
      <!-- BLOG 1 -->
      <article class="blog-card">
        <div class="blog-image">
          <img src="assets/images/Blog/blog1.jpg" alt="Blog 1" />
        </div>

        <div class="blog-content">
          <div class="blog-meta">
            <div>‚ú¶ SoberAli</div>
            <div>üìÖ 21 August,2020</div>
          </div>

          <div class="blog-title">Top essential Trends in 2021</div>
          <div class="blog-desc">
            More off this less hello samlande lied much over tightly
            circa horse taped mighty.
          </div>

          <a class="blog-readmore" href="#">Read More</a>
        </div>
      </article>

      <!-- BLOG 2 -->
      <article class="blog-card">
        <div class="blog-image">
          <img src="assets/images/Blog/blog2.jpg" alt="Blog 2" />
        </div>

        <div class="blog-content">
          <div class="blog-meta">
            <div>‚ú¶ SurFusion</div>
            <div>üìÖ 21 August,2020</div>
          </div>

          <div class="blog-title">Top essential trends in 2021</div>
          <div class="blog-desc">
            More off this less hello samlande lied much over tightly
            circa horse taped mighty.
          </div>

          <a class="blog-readmore" href="#">Read More</a>
        </div>
      </article>

      <!-- BLOG 3 -->
      <article class="blog-card">
        <div class="blog-image">
          <img src="assets/images/Blog/blog3.jpg" alt="Blog 3" />
        </div>

        <div class="blog-content">
          <div class="blog-meta">
            <div>‚ú¶ SoberAli</div>
            <div>üìÖ 21 August,2020</div>
          </div>

          <div class="blog-title">Top essentiel Trends in 2021</div>
          <div class="blog-desc">
            More off this less hello samlande lied much over tightly
            circa horse taped mighty.
          </div>

          <a class="blog-readmore" href="#">Read More</a>
        </div>
      </article>
    </div>
  </section>

  <!-- FOOTER ƒë∆∞·ª£c inject b·∫±ng JS -->
  <div id="site-footer"></div>

  <!-- ========== SCRIPTS ========== -->

  <!-- Inject header/footer + sticky behavior -->
  <script src="assets/components/layout.js"></script>

  <!-- To√†n b·ªô logic gi·ªè h√†ng, auth, modal, carousel -->
  <script>
    /*********************************
     *  CART MANAGER
     *********************************/
    class CartManager {
      constructor() {
        this.cart = this.loadCart();
        this.updateCartIcon();
      }

      saveCart() {
        localStorage.setItem("phuclong_cart", JSON.stringify(this.cart));

        const currentUser = JSON.parse(
          localStorage.getItem("phuclong_current_user") || "null"
        );
        if (currentUser) {
          localStorage.setItem(
            `phuclong_cart_${currentUser.id}`,
            JSON.stringify(this.cart)
          );
        }

        this.updateCartIcon();
      }

      loadCart() {
        const savedCart = localStorage.getItem("phuclong_cart");
        return savedCart ? JSON.parse(savedCart) : [];
      }

      addToCart(product) {
        const existing = this.cart.find((i) => i.id === product.id);
        if (existing) {
          existing.quantity += 1;
        } else {
          this.cart.push({
            id: product.id,
            name: product.name,
            price: product.price,
            image: product.image,
            quantity: 1,
          });
        }

        this.saveCart();
        this.showSuccessMessage(product.name);
      }

      removeFromCart(productId) {
        this.cart = this.cart.filter((i) => i.id !== productId);
        this.saveCart();
      }

      updateQuantity(productId, qty) {
        const item = this.cart.find((i) => i.id === productId);
        if (!item) return;
        if (qty <= 0) {
          this.removeFromCart(productId);
        } else {
          item.quantity = qty;
          this.saveCart();
        }
      }

      getTotalItems() {
        return this.cart.reduce((t, i) => t + i.quantity, 0);
      }

      getTotalPrice() {
        return this.cart.reduce((t, i) => t + i.price * i.quantity, 0);
      }

      updateCartIcon() {
        const icons = document.querySelectorAll(".cart-link, .cart-icon");
        const count = this.getTotalItems();

        icons.forEach((icon) => {
          const oldBadge = icon.querySelector(".cart-badge");
          if (oldBadge) oldBadge.remove();

          if (count > 0) {
            const badge = document.createElement("span");
            badge.className = "cart-badge";
            badge.textContent = count;
            icon.style.position = "relative";
            icon.appendChild(badge);
          }
        });
      }

      showConfirmDialog(product) {
        // ... gi·ªØ nguy√™n logic popup x√°c nh·∫≠n th√™m v√†o gi·ªè ...
        // (B·∫°n c√≥ th·ªÉ paste nguy√™n ph·∫ßn showConfirmDialog c≈© c·ªßa b·∫°n ·ªü ƒë√¢y
        // n·∫øu mu·ªën popup x√°c nh·∫≠n "C√≥/Kh√¥ng")
        this.addToCart(product); // t·∫°m th·ªùi auto-add ƒë·ªÉ demo m∆∞·ª£t
      }

      showSuccessMessage(productName) {
        const note = document.createElement("div");
        note.style.cssText = `
          position:fixed;
          top:20px;
          right:20px;
          background:#28a745;
          color:#fff;
          padding:12px 16px;
          border-radius:4px;
          font-weight:600;
          box-shadow:0 2px 10px rgba(0,0,0,.2);
          z-index:10001;
        `;
        note.textContent = `ƒê√£ th√™m "${productName}" v√†o gi·ªè h√†ng!`;
        document.body.appendChild(note);
        setTimeout(() => {
          if (document.body.contains(note)) document.body.removeChild(note);
        }, 2500);
      }

      goToCart() {
        window.location.href = "cart.html";
      }
    }

    const cartManager = new CartManager();

    /*********************************
     *  AUTH / USER ACCOUNT
     *********************************/
    function registerUser(name, username, email, phone, password) {
      const users = JSON.parse(
        localStorage.getItem("phuclong_users") || "[]"
      );

      if (users.find((u) => u.username === username)) {
        return false;
      }

      const newUser = {
        id: Date.now(),
        name,
        username,
        email,
        phone,
        password,
        createdAt: new Date().toISOString(),
      };

      users.push(newUser);
      localStorage.setItem("phuclong_users", JSON.stringify(users));
      return true;
    }

    function loginUser(username, password) {
      const users = JSON.parse(
        localStorage.getItem("phuclong_users") || "[]"
      );
      const user = users.find(
        (u) => u.username === username && u.password === password
      );

      if (!user) return false;

      localStorage.setItem("phuclong_user_logged_in", "true");
      localStorage.setItem(
        "phuclong_current_user",
        JSON.stringify({
          id: user.id,
          name: user.name,
          username: user.username,
          email: user.email,
          phone: user.phone,
        })
      );

      const userCart = JSON.parse(
        localStorage.getItem(`phuclong_cart_${user.id}`) || "[]"
      );
      localStorage.setItem("phuclong_cart", JSON.stringify(userCart));

      return true;
    }

    function logoutUser() {
      const currentUser = JSON.parse(
        localStorage.getItem("phuclong_current_user") || "null"
      );
      const currentCart = JSON.parse(
        localStorage.getItem("phuclong_cart") || "[]"
      );

      if (currentUser && currentCart.length > 0) {
        localStorage.setItem(
          `phuclong_cart_${currentUser.id}`,
          JSON.stringify(currentCart)
        );
      }

      localStorage.removeItem("phuclong_user_logged_in");
      localStorage.removeItem("phuclong_current_user");
      localStorage.removeItem("phuclong_cart");
    }

    function updateLoginStatusUI() {
      const isLoggedIn =
        localStorage.getItem("phuclong_user_logged_in") === "true";
      const loginStatus = document.getElementById("loginStatus");
      if (!loginStatus) return;
      loginStatus.textContent = isLoggedIn ? "Logout" : "Login";
    }

    // Toggle ƒëƒÉng nh·∫≠p/ƒëƒÉng xu·∫•t khi b·∫•m Login/Logout
    function toggleLogin() {
      const isLoggedIn =
        localStorage.getItem("phuclong_user_logged_in") === "true";
      if (isLoggedIn) {
        logoutUser();
        cartManager.updateCartIcon();
        updateLoginStatusUI();
        showToast("ƒê√£ ƒëƒÉng xu·∫•t!");
      } else {
        showLoginDialog();
      }
    }

    // Toast g·ªçn
    function showToast(msg) {
      const note = document.createElement("div");
      note.style.cssText = `
        position:fixed;
        top:20px;
        right:20px;
        background:#6b4b9a;
        color:#fff;
        padding:12px 16px;
        border-radius:4px;
        font-weight:600;
        box-shadow:0 2px 10px rgba(0,0,0,.2);
        z-index:10001;
      `;
      note.textContent = msg;
      document.body.appendChild(note);
      setTimeout(() => {
        if (document.body.contains(note)) document.body.removeChild(note);
      }, 2500);
    }

    // (C√°c modal login / register chi ti·∫øt b·∫°n ƒë√£ vi·∫øt:
    // showLoginDialog(), showRegisterDialog()...
    // B·∫°n c√≥ th·ªÉ gi·ªØ nguy√™n code c≈© n·∫øu mu·ªën popup UI ƒë·∫πp h∆°n.
    // ·ªû ƒë√¢y m√¨nh kh√¥ng l·∫∑p l·∫°i to√†n b·ªô modal HTML ƒë·ªÉ c√¢u tr·∫£ l·ªùi g·ªçn.)

    /*********************************
     *  PRODUCT ACTIONS
     *********************************/
    function addToCart(productId, productName, productPrice, productImage) {
      const isLoggedIn =
        localStorage.getItem("phuclong_user_logged_in") === "true";

      if (!isLoggedIn) {
        showLoginDialog();
        return;
      }

      const productData = {
        id: productId,
        name: productName,
        price: parseFloat(productPrice),
        image: productImage,
      };

      // b·∫°n c√≥ confirm modal ri√™ng -> ·ªü b·∫£n t·ªëi ∆∞u g·ªçn m√¨nh th√™m th·∫≥ng
      cartManager.showConfirmDialog(productData);
    }

    function goToProductDetail(id, name, price, image) {
      const productData = { id, name, price, image };
      localStorage.setItem(
        "phuclong_current_product",
        JSON.stringify(productData)
      );
      window.location.href = "product-details.html";
    }

    function goToCart() {
      cartManager.goToCart();
    }

    /*********************************
     *  CAROUSEL
     *********************************/
    function initCarousels() {
      document.querySelectorAll(".carousel").forEach((carouselEl) => {
        const windowEl = carouselEl.querySelector(".carousel-window");
        const leftBtn = carouselEl.querySelector(".carousel-arrow.left");
        const rightBtn = carouselEl.querySelector(".carousel-arrow.right");

        // Scroll behavior
        const step = () => {
          const card = carouselEl.querySelector(".product-card");
          if (!card) return 220;
          const w = card.getBoundingClientRect().width;
          return w + 16; // card width + gap
        };

        leftBtn.addEventListener("click", () => {
          windowEl.scrollBy({ left: -step(), behavior: "smooth" });
        });

        rightBtn.addEventListener("click", () => {
          windowEl.scrollBy({ left: step(), behavior: "smooth" });
        });

        // Horizontal scroll smooth + snap
        windowEl.style.scrollBehavior = "smooth";
        windowEl.style.overflowX = "auto";
        windowEl.style.scrollSnapType = "x mandatory";

        carouselEl
          .querySelectorAll(".product-card")
          .forEach((card) => (card.style.scrollSnapAlign = "start"));
      });
    }

    /*********************************
     *  DEBUG HELPERS (t√πy ch·ªçn)
     *********************************/
    function debugAllCarts() {
      const users = JSON.parse(
        localStorage.getItem("phuclong_users") || "[]"
      );
      console.log("ALL USERS:", users);
      users.forEach((u) => {
        console.log(
          `Cart for ${u.username}:`,
          JSON.parse(
            localStorage.getItem("phuclong_cart_" + u.id) || "[]"
          )
        );
      });
      console.log(
        "Active cart:",
        JSON.parse(localStorage.getItem("phuclong_cart") || "[]")
      );
    }

    /*********************************
     *  ON LOAD
     *********************************/
    document.addEventListener("DOMContentLoaded", () => {
      cartManager.updateCartIcon();
      updateLoginStatusUI();
      initCarousels();
    });

    // expose helpers if you want to debug in console
    window.debugAllCarts = debugAllCarts;
    window.toggleLogin = toggleLogin;
    window.goToCart = goToCart;
    window.addToCart = addToCart;
    window.goToProductDetail = goToProductDetail;
  </script>
</body>
</html>
